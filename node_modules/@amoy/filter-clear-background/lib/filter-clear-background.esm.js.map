{"version":3,"file":"filter-clear-background.esm.js","sources":["../src/ClearBackgroundFilter.js"],"sourcesContent":["import vertex from '../../default.vert';\nimport fragment from './clear-background.frag';\nimport { Filter } from '@pixi/core';\n\n/**\n * @class\n * @see {@link https://www.npmjs.com/package/@amoy/filter-clear-background}\n * @see {@link https://www.npmjs.com/package/@amoy/filters}\n * @extends PIXI.Filter\n * @memberof AMOY.filters\n * @param {object} [{r:1.0, g:0, b:0}] default color for clear\n * @param {number} [offset=5.0] the color offset range [0, 20]\n */\n\nclass AmoyClearBackgroundFilter extends Filter {\n    constructor(color={r:1.0, g:0, b:0}, offset=5.) {\n        super(vertex, fragment);\n        // sub class\n        this.uniforms.uColor  = new Float32Array(3);\n        this.offset = offset;\n        this._color = {r:color.r, g:color.g, b:color.b};\n    }\n\n    /**\n     * Override existing apply method in PIXI.Filter\n     * @private\n     */\n    apply(filterManager, input, output, clear) {\n        this.uniforms.uColor[0] = this._color.r;\n        this.uniforms.uColor[1] = this._color.g;\n        this.uniforms.uColor[2] = this._color.b;\n        this.uniforms.uOffset = this.offset;\n        filterManager.applyFilter(this, input, output, clear);\n    }\n\n    /**\n     *  the color is need to be removed\n     * @member {object}\n     */\n    get color(){\n        return this._color;\n    }\n\n    set color(value) {\n        this._color = value;\n        this.uniforms.uColor[0] = value.r;\n        this.uniforms.uColor[1] = value.g;\n        this.uniforms.uColor[2] = value.b;\n    }\n\n    get offset(){\n        return this.uniforms.uOffset;\n    }\n\n    set offset(value) {\n        this.uniforms.uOffset = value;\n    }\n}\n\nexport { AmoyClearBackgroundFilter };\n"],"names":["super"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAcA,IAAM,yBAAyB;IAC3B,kCAAW,CAAC,KAAuB,EAAE,MAAS,EAAE;qCAA/B,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;uCAAS,CAAC;;QACxCA,WAAK,OAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;;QAExB,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;;;;;;8FACnD;;;;;;wCAMD,wBAAM,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE;QACvC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QACpC,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;MACzD;;;;;;IAMD,mBAAI,uBAAO;QACP,OAAO,IAAI,CAAC,MAAM,CAAC;MACtB;;IAED,mBAAI,sBAAM,KAAK,EAAE;QACb,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;MACrC;;IAED,mBAAI,wBAAQ;QACR,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;MAChC;;IAED,mBAAI,uBAAO,KAAK,EAAE;QACd,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;KACjC;;;;;EA1CmC;;;;"}